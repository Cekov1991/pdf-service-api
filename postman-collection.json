{
  "info": {
    "name": "PDF Service API",
    "description": "PDF generation service with template_specifications format",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "pdf-service-api"
  },
  "item": [
    {
      "name": "Health Check",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response has success field\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('success');",
              "    pm.expect(jsonData.success).to.be.true;",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/health",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "health"
          ]
        },
        "description": "Health check endpoint to verify the API is running"
      },
      "response": []
    },
    {
      "name": "Generate PDF - Visit Report (Reports Folder)",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response contains PDF data\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('success');",
              "    pm.expect(jsonData.success).to.be.true;",
              "    pm.expect(jsonData.data).to.have.property('base64');",
              "    pm.expect(jsonData.data).to.have.property('mimeType', 'application/pdf');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"template_specifications\": {\n    \"folder\": \"reports\",\n    \"id\": \"anamnesis\",\n    \"locale\": \"en\"\n  },\n  \"data\": {\n    \"labels\": {\n      \"visit_report\": \"Visit Report\",\n      \"generated_on\": \"Generated on\",\n      \"patient_information\": \"Patient Information\",\n      \"full_name\": \"Full Name\",\n      \"dob\": \"Date of Birth\",\n      \"sex\": \"Sex\",\n      \"unique_master_citizen_number\": \"Citizen Number\",\n      \"phone\": \"Phone\",\n      \"email\": \"Email\",\n      \"visit_information\": \"Visit Information\",\n      \"scheduled_at\": \"Scheduled At\",\n      \"type\": \"Type\",\n      \"status\": \"Status\",\n      \"doctor\": \"Doctor\",\n      \"reason_for_visit\": \"Reason for Visit\",\n      \"anamnesis\": \"Anamnesis\",\n      \"chief_complaint\": \"Chief Complaint\",\n      \"history_of_present_illness\": \"History of Present Illness\",\n      \"past_medical_history\": \"Past Medical History\",\n      \"family_history\": \"Family History\",\n      \"medications_current\": \"Current Medications\",\n      \"allergies\": \"Allergies\",\n      \"therapy_in_use\": \"Therapy in Use\",\n      \"other_notes\": \"Other Notes\",\n      \"no_anamnesis_recorded\": \"No anamnesis recorded\",\n      \"examination\": \"Ophthalmic Examination\",\n      \"visus_od\": \"Visus OD (Right Eye)\",\n      \"visus_os\": \"Visus OS (Left Eye)\",\n      \"iop_od\": \"IOP OD\",\n      \"iop_os\": \"IOP OS\",\n      \"anterior_segment_findings_od\": \"Anterior Segment Findings OD\",\n      \"anterior_segment_findings_os\": \"Anterior Segment Findings OS\",\n      \"posterior_segment_findings_od\": \"Posterior Segment Findings OD\",\n      \"posterior_segment_findings_os\": \"Posterior Segment Findings OS\",\n      \"refraction_title\": \"Refraction Data\",\n      \"eye\": \"Eye\",\n      \"method\": \"Method\",\n      \"sphere\": \"Sphere\",\n      \"cylinder\": \"Cylinder\",\n      \"axis\": \"Axis\",\n      \"add_power\": \"Add Power\",\n      \"notes\": \"Notes\",\n      \"no_examination_recorded\": \"No examination recorded\",\n      \"diagnoses\": \"Diagnoses\",\n      \"code\": \"Code\",\n      \"term\": \"Term\",\n      \"onset_date\": \"Onset Date\",\n      \"is_primary\": \"Primary\",\n      \"yes\": \"Yes\",\n      \"no\": \"No\",\n      \"no_diagnoses_recorded\": \"No diagnoses recorded\",\n      \"imaging\": \"Imaging Studies\",\n      \"modality\": \"Modality\",\n      \"imaging_status\": \"Status\",\n      \"findings\": \"Findings\",\n      \"no_imaging_recorded\": \"No imaging studies recorded\",\n      \"treatments\": \"Treatment Plans\",\n      \"plan_type\": \"Plan Type\",\n      \"recommendation\": \"Recommendation\",\n      \"details\": \"Details\",\n      \"planned_date\": \"Planned Date\",\n      \"no_treatments_recorded\": \"No treatments recorded\",\n      \"prescriptions\": \"Prescriptions\",\n      \"prescription\": \"Prescription\",\n      \"medication_name\": \"Medication\",\n      \"dosage\": \"Dosage\",\n      \"frequency\": \"Frequency\",\n      \"duration\": \"Duration\",\n      \"instructions\": \"Instructions\",\n      \"no_prescriptions_recorded\": \"No prescriptions recorded\",\n      \"spectacles\": \"Spectacle Prescriptions\",\n      \"add\": \"Add\",\n      \"prism\": \"Prism\",\n      \"pd\": \"PD\",\n      \"no_spectacles_recorded\": \"No spectacle prescriptions recorded\",\n      \"doctor_signature\": \"Doctor's Signature\",\n      \"date\": \"Date\"\n    },\n    \"generated_at\": \"07/11/2025 14:30\",\n    \"current_date\": \"07/11/2025\",\n    \"patient\": {\n      \"full_name\": \"John Michael Doe\",\n      \"dob\": \"15/05/1985\",\n      \"sex\": \"Male\",\n      \"unique_master_citizen_number\": \"1234567890123\",\n      \"phone\": \"+1 (555) 123-4567\",\n      \"email\": \"john.doe@example.com\"\n    },\n    \"visit\": {\n      \"scheduled_at\": \"07/11/2025 10:30\",\n      \"type\": \"Regular Checkup\",\n      \"status\": \"Completed\",\n      \"reason_for_visit\": \"Annual eye examination and vision assessment\"\n    },\n    \"doctor\": {\n      \"name\": \"Dr. Sarah Michelle Johnson\"\n    },\n    \"anamnesis\": {\n      \"chief_complaint\": \"Blurred vision when reading, especially in low light conditions. Patient reports difficulty focusing on near objects for the past 3 months.\",\n      \"history_of_present_illness\": \"Patient has noticed progressive difficulty with near vision over the past 3 months. Symptoms worsen in evening hours. No pain, redness, or discharge. No recent trauma or foreign body sensation.\",\n      \"past_medical_history\": \"Hypertension (controlled with medication), Type 2 Diabetes (diagnosed 2018), Previous cataract surgery OD (2020)\",\n      \"family_history\": \"Mother had glaucoma, Father had macular degeneration\",\n      \"medications_current\": \"Metformin 500mg twice daily, Lisinopril 10mg once daily, Aspirin 81mg daily\",\n      \"allergies\": \"Penicillin (rash), Sulfa drugs (hives)\",\n      \"therapy_in_use\": \"Reading glasses +1.50 (prescribed 2 years ago)\",\n      \"other_notes\": \"Patient is a software developer, spends 8-10 hours daily on computer. Reports increased screen time due to recent project deadlines.\"\n    },\n    \"ophthalmic_exam\": {\n      \"visus_od\": \"20/25\",\n      \"visus_os\": \"20/30\",\n      \"iop_od\": \"15 mmHg\",\n      \"iop_os\": \"16 mmHg\",\n      \"anterior_segment_findings_od\": \"Clear cornea, deep and quiet anterior chamber, round and reactive pupil, clear lens (IOL in place)\",\n      \"anterior_segment_findings_os\": \"Clear cornea, deep and quiet anterior chamber, round and reactive pupil, early nuclear sclerosis noted\",\n      \"posterior_segment_findings_od\": \"Optic disc: Pink, well-defined margins, C/D ratio 0.3. Macula: Flat, good foveal reflex. Vessels: Normal caliber and course. Periphery: No tears or holes.\",\n      \"posterior_segment_findings_os\": \"Optic disc: Pink, well-defined margins, C/D ratio 0.3. Macula: Flat, good foveal reflex. Vessels: Normal caliber and course. Periphery: No tears or holes.\",\n      \"refractions\": [\n        {\n          \"eye\": \"OD (Right)\",\n          \"method\": \"Autorefraction\",\n          \"sphere\": \"+0.75\",\n          \"cylinder\": \"-0.50\",\n          \"axis\": \"90\",\n          \"add_power\": \"+2.00\",\n          \"notes\": \"Patient reports improved clarity at distance\"\n        },\n        {\n          \"eye\": \"OS (Left)\",\n          \"method\": \"Autorefraction\",\n          \"sphere\": \"+1.00\",\n          \"cylinder\": \"-0.75\",\n          \"axis\": \"85\",\n          \"add_power\": \"+2.00\",\n          \"notes\": \"Patient reports improved clarity at distance\"\n        }\n      ]\n    },\n    \"diagnoses\": [\n      {\n        \"code\": \"H52.4\",\n        \"term\": \"Presbyopia\",\n        \"onset_date\": \"15/08/2025\",\n        \"is_primary\": true,\n        \"notes\": \"Age-related loss of accommodation\"\n      },\n      {\n        \"code\": \"H25.11\",\n        \"term\": \"Age-related nuclear cataract, left eye\",\n        \"onset_date\": \"07/11/2025\",\n        \"is_primary\": false,\n        \"notes\": \"Early stage, monitor progression\"\n      },\n      {\n        \"code\": \"H52.223\",\n        \"term\": \"Regular astigmatism, bilateral\",\n        \"onset_date\": \"15/08/2025\",\n        \"is_primary\": false,\n        \"notes\": \"Mild astigmatism, correctable with spectacles\"\n      }\n    ],\n    \"imaging_studies\": [\n      {\n        \"modality\": \"OCT (Optical Coherence Tomography)\",\n        \"eye\": \"Both Eyes\",\n        \"status\": \"Completed\",\n        \"findings\": \"Normal macular thickness bilaterally. No signs of diabetic macular edema. Retinal layers well-defined.\"\n      },\n      {\n        \"modality\": \"Fundus Photography\",\n        \"eye\": \"Both Eyes\",\n        \"status\": \"Completed\",\n        \"findings\": \"Images obtained showing healthy optic nerve heads and macular regions. No diabetic retinopathy changes observed.\"\n      }\n    ],\n    \"treatment_plans\": [\n      {\n        \"plan_type\": \"Optical Correction\",\n        \"recommendation\": \"New spectacle prescription for progressive lenses\",\n        \"details\": \"Patient requires updated prescription for both distance and near vision. Progressive lenses recommended for seamless transition between viewing distances.\",\n        \"start_date\": \"07/11/2025\"\n      },\n      {\n        \"plan_type\": \"Follow-up\",\n        \"recommendation\": \"6-month follow-up for cataract monitoring\",\n        \"details\": \"Monitor progression of nuclear sclerosis OS. Patient education provided regarding cataract symptoms to watch for.\",\n        \"start_date\": \"07/05/2026\"\n      },\n      {\n        \"plan_type\": \"Lifestyle Modification\",\n        \"recommendation\": \"Computer vision syndrome management\",\n        \"details\": \"Advised 20-20-20 rule (every 20 minutes, look at something 20 feet away for 20 seconds). Recommend anti-reflective coating on new glasses and proper workstation ergonomics.\",\n        \"start_date\": \"07/11/2025\"\n      }\n    ],\n    \"prescriptions\": [\n      {\n        \"notes\": \"For dry eye symptoms associated with prolonged computer use\",\n        \"prescription_items\": [\n          {\n            \"medication_name\": \"Artificial Tears (Preservative-free)\",\n            \"dosage\": \"1-2 drops\",\n            \"frequency\": \"4 times daily\",\n            \"duration\": \"Ongoing\",\n            \"instructions\": \"Use before computer work and as needed for dryness\"\n          },\n          {\n            \"medication_name\": \"Omega-3 Supplements\",\n            \"dosage\": \"1000mg\",\n            \"frequency\": \"Once daily with food\",\n            \"duration\": \"3 months\",\n            \"instructions\": \"To support tear film quality\"\n          }\n        ]\n      }\n    ],\n    \"spectacle_prescriptions\": [\n      {\n        \"eye\": \"OD (Right)\",\n        \"sphere\": \"+0.75\",\n        \"cylinder\": \"-0.50\",\n        \"axis\": \"90\",\n        \"add_power\": \"+2.00\",\n        \"prism\": \"\\u2014\",\n        \"pupillary_distance\": \"32mm\"\n      },\n      {\n        \"eye\": \"OS (Left)\",\n        \"sphere\": \"+1.00\",\n        \"cylinder\": \"-0.75\",\n        \"axis\": \"85\",\n        \"add_power\": \"+2.00\",\n        \"prism\": \"\\u2014\",\n        \"pupillary_distance\": \"32mm\"\n      }\n    ]\n  },\n  \"options\": {\n    \"format\": \"A4\",\n    \"landscape\": false\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/pdf/generate",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "pdf",
            "generate"
          ]
        },
        "description": "Generate a PDF from a template in the reports folder with embedded labels"
      },
      "response": []
    },
    {
      "name": "Generate PDF - Visit Report with Locale",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response contains PDF data\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.success).to.be.true;",
              "    pm.expect(jsonData.data.base64).to.exist;",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"template_specifications\": {\n    \"folder\": \"reports\",\n    \"id\": \"anamnesis\",\n    \"locale\": \"mk\"\n  },\n  \"data\": {\n    \"generated_at\": \"07/11/2025 14:30\",\n    \"current_date\": \"07/11/2025\",\n    \"patient\": {\n      \"full_name\": \"John Michael Doe\",\n      \"dob\": \"15/05/1985\",\n      \"sex\": \"Male\",\n      \"unique_master_citizen_number\": \"1234567890123\",\n      \"phone\": \"+1 (555) 123-4567\",\n      \"email\": \"john.doe@example.com\"\n    },\n    \"visit\": {\n      \"scheduled_at\": \"07/11/2025 10:30\",\n      \"type\": \"Regular Checkup\",\n      \"status\": \"Completed\",\n      \"reason_for_visit\": \"Annual eye examination and vision assessment\"\n    },\n    \"doctor\": {\n      \"name\": \"Dr. Sarah Michelle Johnson\"\n    },\n    \"anamnesis\": {\n      \"chief_complaint\": \"Blurred vision when reading, especially in low light conditions. Patient reports difficulty focusing on near objects for the past 3 months.\",\n      \"history_of_present_illness\": \"Patient has noticed progressive difficulty with near vision over the past 3 months. Symptoms worsen in evening hours. No pain, redness, or discharge. No recent trauma or foreign body sensation.\",\n      \"past_medical_history\": \"Hypertension (controlled with medication), Type 2 Diabetes (diagnosed 2018), Previous cataract surgery OD (2020)\",\n      \"family_history\": \"Mother had glaucoma, Father had macular degeneration\",\n      \"medications_current\": \"Metformin 500mg twice daily, Lisinopril 10mg once daily, Aspirin 81mg daily\",\n      \"allergies\": \"Penicillin (rash), Sulfa drugs (hives)\",\n      \"therapy_in_use\": \"Reading glasses +1.50 (prescribed 2 years ago)\",\n      \"other_notes\": \"Patient is a software developer, spends 8-10 hours daily on computer. Reports increased screen time due to recent project deadlines.\"\n    },\n    \"ophthalmic_exam\": {\n      \"visus_od\": \"20/25\",\n      \"visus_os\": \"20/30\",\n      \"iop_od\": \"15 mmHg\",\n      \"iop_os\": \"16 mmHg\",\n      \"anterior_segment_findings_od\": \"Clear cornea, deep and quiet anterior chamber, round and reactive pupil, clear lens (IOL in place)\",\n      \"anterior_segment_findings_os\": \"Clear cornea, deep and quiet anterior chamber, round and reactive pupil, early nuclear sclerosis noted\",\n      \"posterior_segment_findings_od\": \"Optic disc: Pink, well-defined margins, C/D ratio 0.3. Macula: Flat, good foveal reflex. Vessels: Normal caliber and course. Periphery: No tears or holes.\",\n      \"posterior_segment_findings_os\": \"Optic disc: Pink, well-defined margins, C/D ratio 0.3. Macula: Flat, good foveal reflex. Vessels: Normal caliber and course. Periphery: No tears or holes.\",\n      \"refractions\": [\n        {\n          \"eye\": \"OD (Right)\",\n          \"method\": \"Autorefraction\",\n          \"sphere\": \"+0.75\",\n          \"cylinder\": \"-0.50\",\n          \"axis\": \"90\",\n          \"add_power\": \"+2.00\",\n          \"notes\": \"Patient reports improved clarity at distance\"\n        },\n        {\n          \"eye\": \"OS (Left)\",\n          \"method\": \"Autorefraction\",\n          \"sphere\": \"+1.00\",\n          \"cylinder\": \"-0.75\",\n          \"axis\": \"85\",\n          \"add_power\": \"+2.00\",\n          \"notes\": \"Patient reports improved clarity at distance\"\n        }\n      ]\n    },\n    \"diagnoses\": [\n      {\n        \"code\": \"H52.4\",\n        \"term\": \"Presbyopia\",\n        \"onset_date\": \"15/08/2025\",\n        \"is_primary\": true,\n        \"notes\": \"Age-related loss of accommodation\"\n      },\n      {\n        \"code\": \"H25.11\",\n        \"term\": \"Age-related nuclear cataract, left eye\",\n        \"onset_date\": \"07/11/2025\",\n        \"is_primary\": false,\n        \"notes\": \"Early stage, monitor progression\"\n      },\n      {\n        \"code\": \"H52.223\",\n        \"term\": \"Regular astigmatism, bilateral\",\n        \"onset_date\": \"15/08/2025\",\n        \"is_primary\": false,\n        \"notes\": \"Mild astigmatism, correctable with spectacles\"\n      }\n    ],\n    \"imaging_studies\": [\n      {\n        \"modality\": \"OCT (Optical Coherence Tomography)\",\n        \"eye\": \"Both Eyes\",\n        \"status\": \"Completed\",\n        \"findings\": \"Normal macular thickness bilaterally. No signs of diabetic macular edema. Retinal layers well-defined.\"\n      },\n      {\n        \"modality\": \"Fundus Photography\",\n        \"eye\": \"Both Eyes\",\n        \"status\": \"Completed\",\n        \"findings\": \"Images obtained showing healthy optic nerve heads and macular regions. No diabetic retinopathy changes observed.\"\n      }\n    ],\n    \"treatment_plans\": [\n      {\n        \"plan_type\": \"Optical Correction\",\n        \"recommendation\": \"New spectacle prescription for progressive lenses\",\n        \"details\": \"Patient requires updated prescription for both distance and near vision. Progressive lenses recommended for seamless transition between viewing distances.\",\n        \"start_date\": \"07/11/2025\"\n      },\n      {\n        \"plan_type\": \"Follow-up\",\n        \"recommendation\": \"6-month follow-up for cataract monitoring\",\n        \"details\": \"Monitor progression of nuclear sclerosis OS. Patient education provided regarding cataract symptoms to watch for.\",\n        \"start_date\": \"07/05/2026\"\n      },\n      {\n        \"plan_type\": \"Lifestyle Modification\",\n        \"recommendation\": \"Computer vision syndrome management\",\n        \"details\": \"Advised 20-20-20 rule (every 20 minutes, look at something 20 feet away for 20 seconds). Recommend anti-reflective coating on new glasses and proper workstation ergonomics.\",\n        \"start_date\": \"07/11/2025\"\n      }\n    ],\n    \"prescriptions\": [\n      {\n        \"notes\": \"For dry eye symptoms associated with prolonged computer use\",\n        \"prescription_items\": [\n          {\n            \"medication_name\": \"Artificial Tears (Preservative-free)\",\n            \"dosage\": \"1-2 drops\",\n            \"frequency\": \"4 times daily\",\n            \"duration\": \"Ongoing\",\n            \"instructions\": \"Use before computer work and as needed for dryness\"\n          },\n          {\n            \"medication_name\": \"Omega-3 Supplements\",\n            \"dosage\": \"1000mg\",\n            \"frequency\": \"Once daily with food\",\n            \"duration\": \"3 months\",\n            \"instructions\": \"To support tear film quality\"\n          }\n        ]\n      }\n    ],\n    \"spectacle_prescriptions\": [\n      {\n        \"eye\": \"OD (Right)\",\n        \"sphere\": \"+0.75\",\n        \"cylinder\": \"-0.50\",\n        \"axis\": \"90\",\n        \"add_power\": \"+2.00\",\n        \"prism\": \"\\u2014\",\n        \"pupillary_distance\": \"32mm\"\n      },\n      {\n        \"eye\": \"OS (Left)\",\n        \"sphere\": \"+1.00\",\n        \"cylinder\": \"-0.75\",\n        \"axis\": \"85\",\n        \"add_power\": \"+2.00\",\n        \"prism\": \"\\u2014\",\n        \"pupillary_distance\": \"32mm\"\n      }\n    ]\n  },\n  \"options\": {\n    \"format\": \"A4\",\n    \"landscape\": false\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/pdf/generate",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "pdf",
            "generate"
          ]
        },
        "description": "Generate a PDF using Macedonian locale translations from locale files (src/locales/mk.json)"
      },
      "response": []
    },
    {
      "name": "Generate Visit Report - Dedicated Endpoint",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"PDF generated successfully\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.success).to.be.true;",
              "    pm.expect(jsonData.data.size).to.be.above(0);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"template_specifications\": {\n    \"folder\": \"reports\",\n    \"id\": \"anamnesis\",\n    \"locale\": \"en\"\n  },\n  \"data\": {\n    \"labels\": {\n      \"visit_report\": \"Visit Report\",\n      \"generated_on\": \"Generated on\",\n      \"patient_information\": \"Patient Information\",\n      \"full_name\": \"Full Name\",\n      \"dob\": \"Date of Birth\",\n      \"sex\": \"Sex\",\n      \"unique_master_citizen_number\": \"Citizen Number\",\n      \"phone\": \"Phone\",\n      \"email\": \"Email\",\n      \"visit_information\": \"Visit Information\",\n      \"scheduled_at\": \"Scheduled At\",\n      \"type\": \"Type\",\n      \"status\": \"Status\",\n      \"doctor\": \"Doctor\",\n      \"reason_for_visit\": \"Reason for Visit\",\n      \"anamnesis\": \"Anamnesis\",\n      \"chief_complaint\": \"Chief Complaint\",\n      \"history_of_present_illness\": \"History of Present Illness\",\n      \"past_medical_history\": \"Past Medical History\",\n      \"family_history\": \"Family History\",\n      \"medications_current\": \"Current Medications\",\n      \"allergies\": \"Allergies\",\n      \"therapy_in_use\": \"Therapy in Use\",\n      \"other_notes\": \"Other Notes\",\n      \"no_anamnesis_recorded\": \"No anamnesis recorded\",\n      \"examination\": \"Ophthalmic Examination\",\n      \"visus_od\": \"Visus OD (Right Eye)\",\n      \"visus_os\": \"Visus OS (Left Eye)\",\n      \"iop_od\": \"IOP OD\",\n      \"iop_os\": \"IOP OS\",\n      \"anterior_segment_findings_od\": \"Anterior Segment Findings OD\",\n      \"anterior_segment_findings_os\": \"Anterior Segment Findings OS\",\n      \"posterior_segment_findings_od\": \"Posterior Segment Findings OD\",\n      \"posterior_segment_findings_os\": \"Posterior Segment Findings OS\",\n      \"refraction_title\": \"Refraction Data\",\n      \"eye\": \"Eye\",\n      \"method\": \"Method\",\n      \"sphere\": \"Sphere\",\n      \"cylinder\": \"Cylinder\",\n      \"axis\": \"Axis\",\n      \"add_power\": \"Add Power\",\n      \"notes\": \"Notes\",\n      \"no_examination_recorded\": \"No examination recorded\",\n      \"diagnoses\": \"Diagnoses\",\n      \"code\": \"Code\",\n      \"term\": \"Term\",\n      \"onset_date\": \"Onset Date\",\n      \"is_primary\": \"Primary\",\n      \"yes\": \"Yes\",\n      \"no\": \"No\",\n      \"no_diagnoses_recorded\": \"No diagnoses recorded\",\n      \"imaging\": \"Imaging Studies\",\n      \"modality\": \"Modality\",\n      \"imaging_status\": \"Status\",\n      \"findings\": \"Findings\",\n      \"no_imaging_recorded\": \"No imaging studies recorded\",\n      \"treatments\": \"Treatment Plans\",\n      \"plan_type\": \"Plan Type\",\n      \"recommendation\": \"Recommendation\",\n      \"details\": \"Details\",\n      \"planned_date\": \"Planned Date\",\n      \"no_treatments_recorded\": \"No treatments recorded\",\n      \"prescriptions\": \"Prescriptions\",\n      \"prescription\": \"Prescription\",\n      \"medication_name\": \"Medication\",\n      \"dosage\": \"Dosage\",\n      \"frequency\": \"Frequency\",\n      \"duration\": \"Duration\",\n      \"instructions\": \"Instructions\",\n      \"no_prescriptions_recorded\": \"No prescriptions recorded\",\n      \"spectacles\": \"Spectacle Prescriptions\",\n      \"add\": \"Add\",\n      \"prism\": \"Prism\",\n      \"pd\": \"PD\",\n      \"no_spectacles_recorded\": \"No spectacle prescriptions recorded\",\n      \"doctor_signature\": \"Doctor's Signature\",\n      \"date\": \"Date\"\n    },\n    \"generated_at\": \"07/11/2025 14:30\",\n    \"current_date\": \"07/11/2025\",\n    \"patient\": {\n      \"full_name\": \"John Michael Doe\",\n      \"dob\": \"15/05/1985\",\n      \"sex\": \"Male\",\n      \"unique_master_citizen_number\": \"1234567890123\",\n      \"phone\": \"+1 (555) 123-4567\",\n      \"email\": \"john.doe@example.com\"\n    },\n    \"visit\": {\n      \"scheduled_at\": \"07/11/2025 10:30\",\n      \"type\": \"Regular Checkup\",\n      \"status\": \"Completed\",\n      \"reason_for_visit\": \"Annual eye examination and vision assessment\"\n    },\n    \"doctor\": {\n      \"name\": \"Dr. Sarah Michelle Johnson\"\n    },\n    \"anamnesis\": {\n      \"chief_complaint\": \"Blurred vision when reading, especially in low light conditions. Patient reports difficulty focusing on near objects for the past 3 months.\",\n      \"history_of_present_illness\": \"Patient has noticed progressive difficulty with near vision over the past 3 months. Symptoms worsen in evening hours. No pain, redness, or discharge. No recent trauma or foreign body sensation.\",\n      \"past_medical_history\": \"Hypertension (controlled with medication), Type 2 Diabetes (diagnosed 2018), Previous cataract surgery OD (2020)\",\n      \"family_history\": \"Mother had glaucoma, Father had macular degeneration\",\n      \"medications_current\": \"Metformin 500mg twice daily, Lisinopril 10mg once daily, Aspirin 81mg daily\",\n      \"allergies\": \"Penicillin (rash), Sulfa drugs (hives)\",\n      \"therapy_in_use\": \"Reading glasses +1.50 (prescribed 2 years ago)\",\n      \"other_notes\": \"Patient is a software developer, spends 8-10 hours daily on computer. Reports increased screen time due to recent project deadlines.\"\n    },\n    \"ophthalmic_exam\": {\n      \"visus_od\": \"20/25\",\n      \"visus_os\": \"20/30\",\n      \"iop_od\": \"15 mmHg\",\n      \"iop_os\": \"16 mmHg\",\n      \"anterior_segment_findings_od\": \"Clear cornea, deep and quiet anterior chamber, round and reactive pupil, clear lens (IOL in place)\",\n      \"anterior_segment_findings_os\": \"Clear cornea, deep and quiet anterior chamber, round and reactive pupil, early nuclear sclerosis noted\",\n      \"posterior_segment_findings_od\": \"Optic disc: Pink, well-defined margins, C/D ratio 0.3. Macula: Flat, good foveal reflex. Vessels: Normal caliber and course. Periphery: No tears or holes.\",\n      \"posterior_segment_findings_os\": \"Optic disc: Pink, well-defined margins, C/D ratio 0.3. Macula: Flat, good foveal reflex. Vessels: Normal caliber and course. Periphery: No tears or holes.\",\n      \"refractions\": [\n        {\n          \"eye\": \"OD (Right)\",\n          \"method\": \"Autorefraction\",\n          \"sphere\": \"+0.75\",\n          \"cylinder\": \"-0.50\",\n          \"axis\": \"90\",\n          \"add_power\": \"+2.00\",\n          \"notes\": \"Patient reports improved clarity at distance\"\n        },\n        {\n          \"eye\": \"OS (Left)\",\n          \"method\": \"Autorefraction\",\n          \"sphere\": \"+1.00\",\n          \"cylinder\": \"-0.75\",\n          \"axis\": \"85\",\n          \"add_power\": \"+2.00\",\n          \"notes\": \"Patient reports improved clarity at distance\"\n        }\n      ]\n    },\n    \"diagnoses\": [\n      {\n        \"code\": \"H52.4\",\n        \"term\": \"Presbyopia\",\n        \"onset_date\": \"15/08/2025\",\n        \"is_primary\": true,\n        \"notes\": \"Age-related loss of accommodation\"\n      },\n      {\n        \"code\": \"H25.11\",\n        \"term\": \"Age-related nuclear cataract, left eye\",\n        \"onset_date\": \"07/11/2025\",\n        \"is_primary\": false,\n        \"notes\": \"Early stage, monitor progression\"\n      },\n      {\n        \"code\": \"H52.223\",\n        \"term\": \"Regular astigmatism, bilateral\",\n        \"onset_date\": \"15/08/2025\",\n        \"is_primary\": false,\n        \"notes\": \"Mild astigmatism, correctable with spectacles\"\n      }\n    ],\n    \"imaging_studies\": [\n      {\n        \"modality\": \"OCT (Optical Coherence Tomography)\",\n        \"eye\": \"Both Eyes\",\n        \"status\": \"Completed\",\n        \"findings\": \"Normal macular thickness bilaterally. No signs of diabetic macular edema. Retinal layers well-defined.\"\n      },\n      {\n        \"modality\": \"Fundus Photography\",\n        \"eye\": \"Both Eyes\",\n        \"status\": \"Completed\",\n        \"findings\": \"Images obtained showing healthy optic nerve heads and macular regions. No diabetic retinopathy changes observed.\"\n      }\n    ],\n    \"treatment_plans\": [\n      {\n        \"plan_type\": \"Optical Correction\",\n        \"recommendation\": \"New spectacle prescription for progressive lenses\",\n        \"details\": \"Patient requires updated prescription for both distance and near vision. Progressive lenses recommended for seamless transition between viewing distances.\",\n        \"start_date\": \"07/11/2025\"\n      },\n      {\n        \"plan_type\": \"Follow-up\",\n        \"recommendation\": \"6-month follow-up for cataract monitoring\",\n        \"details\": \"Monitor progression of nuclear sclerosis OS. Patient education provided regarding cataract symptoms to watch for.\",\n        \"start_date\": \"07/05/2026\"\n      },\n      {\n        \"plan_type\": \"Lifestyle Modification\",\n        \"recommendation\": \"Computer vision syndrome management\",\n        \"details\": \"Advised 20-20-20 rule (every 20 minutes, look at something 20 feet away for 20 seconds). Recommend anti-reflective coating on new glasses and proper workstation ergonomics.\",\n        \"start_date\": \"07/11/2025\"\n      }\n    ],\n    \"prescriptions\": [\n      {\n        \"notes\": \"For dry eye symptoms associated with prolonged computer use\",\n        \"prescription_items\": [\n          {\n            \"medication_name\": \"Artificial Tears (Preservative-free)\",\n            \"dosage\": \"1-2 drops\",\n            \"frequency\": \"4 times daily\",\n            \"duration\": \"Ongoing\",\n            \"instructions\": \"Use before computer work and as needed for dryness\"\n          },\n          {\n            \"medication_name\": \"Omega-3 Supplements\",\n            \"dosage\": \"1000mg\",\n            \"frequency\": \"Once daily with food\",\n            \"duration\": \"3 months\",\n            \"instructions\": \"To support tear film quality\"\n          }\n        ]\n      }\n    ],\n    \"spectacle_prescriptions\": [\n      {\n        \"eye\": \"OD (Right)\",\n        \"sphere\": \"+0.75\",\n        \"cylinder\": \"-0.50\",\n        \"axis\": \"90\",\n        \"add_power\": \"+2.00\",\n        \"prism\": \"\\u2014\",\n        \"pupillary_distance\": \"32mm\"\n      },\n      {\n        \"eye\": \"OS (Left)\",\n        \"sphere\": \"+1.00\",\n        \"cylinder\": \"-0.75\",\n        \"axis\": \"85\",\n        \"add_power\": \"+2.00\",\n        \"prism\": \"\\u2014\",\n        \"pupillary_distance\": \"32mm\"\n      }\n    ]\n  },\n  \"options\": {\n    \"format\": \"A4\",\n    \"landscape\": false\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/pdf/visit-report",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "pdf",
            "visit-report"
          ]
        },
        "description": "Generate visit report using the dedicated endpoint with anamnesis data"
      },
      "response": []
    },
    {
      "name": "Generate PDF - Root Template",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"template_specifications\": {\n    \"id\": \"visit-report\",\n    \"locale\": \"en\"\n  },\n  \"data\": {\n    \"labels\": {\n      \"visit_report\": \"Visit Report\",\n      \"generated_on\": \"Generated on\",\n      \"patient_information\": \"Patient Information\",\n      \"full_name\": \"Full Name\",\n      \"dob\": \"Date of Birth\",\n      \"sex\": \"Sex\",\n      \"unique_master_citizen_number\": \"Citizen Number\",\n      \"phone\": \"Phone\",\n      \"email\": \"Email\",\n      \"visit_information\": \"Visit Information\",\n      \"scheduled_at\": \"Scheduled At\",\n      \"type\": \"Type\",\n      \"status\": \"Status\",\n      \"doctor\": \"Doctor\",\n      \"reason_for_visit\": \"Reason for Visit\",\n      \"anamnesis\": \"Anamnesis\",\n      \"chief_complaint\": \"Chief Complaint\",\n      \"history_of_present_illness\": \"History of Present Illness\",\n      \"past_medical_history\": \"Past Medical History\",\n      \"family_history\": \"Family History\",\n      \"medications_current\": \"Current Medications\",\n      \"allergies\": \"Allergies\",\n      \"therapy_in_use\": \"Therapy in Use\",\n      \"other_notes\": \"Other Notes\",\n      \"no_anamnesis_recorded\": \"No anamnesis recorded\",\n      \"examination\": \"Ophthalmic Examination\",\n      \"visus_od\": \"Visus OD (Right Eye)\",\n      \"visus_os\": \"Visus OS (Left Eye)\",\n      \"iop_od\": \"IOP OD\",\n      \"iop_os\": \"IOP OS\",\n      \"anterior_segment_findings_od\": \"Anterior Segment Findings OD\",\n      \"anterior_segment_findings_os\": \"Anterior Segment Findings OS\",\n      \"posterior_segment_findings_od\": \"Posterior Segment Findings OD\",\n      \"posterior_segment_findings_os\": \"Posterior Segment Findings OS\",\n      \"refraction_title\": \"Refraction Data\",\n      \"eye\": \"Eye\",\n      \"method\": \"Method\",\n      \"sphere\": \"Sphere\",\n      \"cylinder\": \"Cylinder\",\n      \"axis\": \"Axis\",\n      \"add_power\": \"Add Power\",\n      \"notes\": \"Notes\",\n      \"no_examination_recorded\": \"No examination recorded\",\n      \"diagnoses\": \"Diagnoses\",\n      \"code\": \"Code\",\n      \"term\": \"Term\",\n      \"onset_date\": \"Onset Date\",\n      \"is_primary\": \"Primary\",\n      \"yes\": \"Yes\",\n      \"no\": \"No\",\n      \"no_diagnoses_recorded\": \"No diagnoses recorded\",\n      \"imaging\": \"Imaging Studies\",\n      \"modality\": \"Modality\",\n      \"imaging_status\": \"Status\",\n      \"findings\": \"Findings\",\n      \"no_imaging_recorded\": \"No imaging studies recorded\",\n      \"treatments\": \"Treatment Plans\",\n      \"plan_type\": \"Plan Type\",\n      \"recommendation\": \"Recommendation\",\n      \"details\": \"Details\",\n      \"planned_date\": \"Planned Date\",\n      \"no_treatments_recorded\": \"No treatments recorded\",\n      \"prescriptions\": \"Prescriptions\",\n      \"prescription\": \"Prescription\",\n      \"medication_name\": \"Medication\",\n      \"dosage\": \"Dosage\",\n      \"frequency\": \"Frequency\",\n      \"duration\": \"Duration\",\n      \"instructions\": \"Instructions\",\n      \"no_prescriptions_recorded\": \"No prescriptions recorded\",\n      \"spectacles\": \"Spectacle Prescriptions\",\n      \"add\": \"Add\",\n      \"prism\": \"Prism\",\n      \"pd\": \"PD\",\n      \"no_spectacles_recorded\": \"No spectacle prescriptions recorded\",\n      \"doctor_signature\": \"Doctor's Signature\",\n      \"date\": \"Date\"\n    },\n    \"generated_at\": \"07/11/2025 14:30\",\n    \"current_date\": \"07/11/2025\",\n    \"patient\": {\n      \"full_name\": \"John Michael Doe\",\n      \"dob\": \"15/05/1985\",\n      \"sex\": \"Male\",\n      \"unique_master_citizen_number\": \"1234567890123\",\n      \"phone\": \"+1 (555) 123-4567\",\n      \"email\": \"john.doe@example.com\"\n    },\n    \"visit\": {\n      \"scheduled_at\": \"07/11/2025 10:30\",\n      \"type\": \"Regular Checkup\",\n      \"status\": \"Completed\",\n      \"reason_for_visit\": \"Annual eye examination and vision assessment\"\n    },\n    \"doctor\": {\n      \"name\": \"Dr. Sarah Michelle Johnson\"\n    },\n    \"anamnesis\": {\n      \"chief_complaint\": \"Blurred vision when reading, especially in low light conditions. Patient reports difficulty focusing on near objects for the past 3 months.\",\n      \"history_of_present_illness\": \"Patient has noticed progressive difficulty with near vision over the past 3 months. Symptoms worsen in evening hours. No pain, redness, or discharge. No recent trauma or foreign body sensation.\",\n      \"past_medical_history\": \"Hypertension (controlled with medication), Type 2 Diabetes (diagnosed 2018), Previous cataract surgery OD (2020)\",\n      \"family_history\": \"Mother had glaucoma, Father had macular degeneration\",\n      \"medications_current\": \"Metformin 500mg twice daily, Lisinopril 10mg once daily, Aspirin 81mg daily\",\n      \"allergies\": \"Penicillin (rash), Sulfa drugs (hives)\",\n      \"therapy_in_use\": \"Reading glasses +1.50 (prescribed 2 years ago)\",\n      \"other_notes\": \"Patient is a software developer, spends 8-10 hours daily on computer. Reports increased screen time due to recent project deadlines.\"\n    },\n    \"ophthalmic_exam\": {\n      \"visus_od\": \"20/25\",\n      \"visus_os\": \"20/30\",\n      \"iop_od\": \"15 mmHg\",\n      \"iop_os\": \"16 mmHg\",\n      \"anterior_segment_findings_od\": \"Clear cornea, deep and quiet anterior chamber, round and reactive pupil, clear lens (IOL in place)\",\n      \"anterior_segment_findings_os\": \"Clear cornea, deep and quiet anterior chamber, round and reactive pupil, early nuclear sclerosis noted\",\n      \"posterior_segment_findings_od\": \"Optic disc: Pink, well-defined margins, C/D ratio 0.3. Macula: Flat, good foveal reflex. Vessels: Normal caliber and course. Periphery: No tears or holes.\",\n      \"posterior_segment_findings_os\": \"Optic disc: Pink, well-defined margins, C/D ratio 0.3. Macula: Flat, good foveal reflex. Vessels: Normal caliber and course. Periphery: No tears or holes.\",\n      \"refractions\": [\n        {\n          \"eye\": \"OD (Right)\",\n          \"method\": \"Autorefraction\",\n          \"sphere\": \"+0.75\",\n          \"cylinder\": \"-0.50\",\n          \"axis\": \"90\",\n          \"add_power\": \"+2.00\",\n          \"notes\": \"Patient reports improved clarity at distance\"\n        },\n        {\n          \"eye\": \"OS (Left)\",\n          \"method\": \"Autorefraction\",\n          \"sphere\": \"+1.00\",\n          \"cylinder\": \"-0.75\",\n          \"axis\": \"85\",\n          \"add_power\": \"+2.00\",\n          \"notes\": \"Patient reports improved clarity at distance\"\n        }\n      ]\n    },\n    \"diagnoses\": [\n      {\n        \"code\": \"H52.4\",\n        \"term\": \"Presbyopia\",\n        \"onset_date\": \"15/08/2025\",\n        \"is_primary\": true,\n        \"notes\": \"Age-related loss of accommodation\"\n      },\n      {\n        \"code\": \"H25.11\",\n        \"term\": \"Age-related nuclear cataract, left eye\",\n        \"onset_date\": \"07/11/2025\",\n        \"is_primary\": false,\n        \"notes\": \"Early stage, monitor progression\"\n      },\n      {\n        \"code\": \"H52.223\",\n        \"term\": \"Regular astigmatism, bilateral\",\n        \"onset_date\": \"15/08/2025\",\n        \"is_primary\": false,\n        \"notes\": \"Mild astigmatism, correctable with spectacles\"\n      }\n    ],\n    \"imaging_studies\": [\n      {\n        \"modality\": \"OCT (Optical Coherence Tomography)\",\n        \"eye\": \"Both Eyes\",\n        \"status\": \"Completed\",\n        \"findings\": \"Normal macular thickness bilaterally. No signs of diabetic macular edema. Retinal layers well-defined.\"\n      },\n      {\n        \"modality\": \"Fundus Photography\",\n        \"eye\": \"Both Eyes\",\n        \"status\": \"Completed\",\n        \"findings\": \"Images obtained showing healthy optic nerve heads and macular regions. No diabetic retinopathy changes observed.\"\n      }\n    ],\n    \"treatment_plans\": [\n      {\n        \"plan_type\": \"Optical Correction\",\n        \"recommendation\": \"New spectacle prescription for progressive lenses\",\n        \"details\": \"Patient requires updated prescription for both distance and near vision. Progressive lenses recommended for seamless transition between viewing distances.\",\n        \"start_date\": \"07/11/2025\"\n      },\n      {\n        \"plan_type\": \"Follow-up\",\n        \"recommendation\": \"6-month follow-up for cataract monitoring\",\n        \"details\": \"Monitor progression of nuclear sclerosis OS. Patient education provided regarding cataract symptoms to watch for.\",\n        \"start_date\": \"07/05/2026\"\n      },\n      {\n        \"plan_type\": \"Lifestyle Modification\",\n        \"recommendation\": \"Computer vision syndrome management\",\n        \"details\": \"Advised 20-20-20 rule (every 20 minutes, look at something 20 feet away for 20 seconds). Recommend anti-reflective coating on new glasses and proper workstation ergonomics.\",\n        \"start_date\": \"07/11/2025\"\n      }\n    ],\n    \"prescriptions\": [\n      {\n        \"notes\": \"For dry eye symptoms associated with prolonged computer use\",\n        \"prescription_items\": [\n          {\n            \"medication_name\": \"Artificial Tears (Preservative-free)\",\n            \"dosage\": \"1-2 drops\",\n            \"frequency\": \"4 times daily\",\n            \"duration\": \"Ongoing\",\n            \"instructions\": \"Use before computer work and as needed for dryness\"\n          },\n          {\n            \"medication_name\": \"Omega-3 Supplements\",\n            \"dosage\": \"1000mg\",\n            \"frequency\": \"Once daily with food\",\n            \"duration\": \"3 months\",\n            \"instructions\": \"To support tear film quality\"\n          }\n        ]\n      }\n    ],\n    \"spectacle_prescriptions\": [\n      {\n        \"eye\": \"OD (Right)\",\n        \"sphere\": \"+0.75\",\n        \"cylinder\": \"-0.50\",\n        \"axis\": \"90\",\n        \"add_power\": \"+2.00\",\n        \"prism\": \"\\u2014\",\n        \"pupillary_distance\": \"32mm\"\n      },\n      {\n        \"eye\": \"OS (Left)\",\n        \"sphere\": \"+1.00\",\n        \"cylinder\": \"-0.75\",\n        \"axis\": \"85\",\n        \"add_power\": \"+2.00\",\n        \"prism\": \"\\u2014\",\n        \"pupillary_distance\": \"32mm\"\n      }\n    ]\n  },\n  \"options\": {\n    \"format\": \"A4\",\n    \"landscape\": false\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/pdf/generate",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "pdf",
            "generate"
          ]
        },
        "description": "Generate PDF from a template in the root templates folder (no folder specified)"
      },
      "response": []
    },
    {
      "name": "Generate PDF - Landscape Format",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"template_specifications\": {\n    \"folder\": \"reports\",\n    \"id\": \"anamnesis\",\n    \"locale\": \"en\"\n  },\n  \"data\": {\n    \"labels\": {\n      \"visit_report\": \"Visit Report\",\n      \"generated_on\": \"Generated on\",\n      \"patient_information\": \"Patient Information\",\n      \"full_name\": \"Full Name\",\n      \"dob\": \"Date of Birth\",\n      \"sex\": \"Sex\",\n      \"unique_master_citizen_number\": \"Citizen Number\",\n      \"phone\": \"Phone\",\n      \"email\": \"Email\",\n      \"visit_information\": \"Visit Information\",\n      \"scheduled_at\": \"Scheduled At\",\n      \"type\": \"Type\",\n      \"status\": \"Status\",\n      \"doctor\": \"Doctor\",\n      \"reason_for_visit\": \"Reason for Visit\",\n      \"anamnesis\": \"Anamnesis\",\n      \"chief_complaint\": \"Chief Complaint\",\n      \"history_of_present_illness\": \"History of Present Illness\",\n      \"past_medical_history\": \"Past Medical History\",\n      \"family_history\": \"Family History\",\n      \"medications_current\": \"Current Medications\",\n      \"allergies\": \"Allergies\",\n      \"therapy_in_use\": \"Therapy in Use\",\n      \"other_notes\": \"Other Notes\",\n      \"no_anamnesis_recorded\": \"No anamnesis recorded\",\n      \"examination\": \"Ophthalmic Examination\",\n      \"visus_od\": \"Visus OD (Right Eye)\",\n      \"visus_os\": \"Visus OS (Left Eye)\",\n      \"iop_od\": \"IOP OD\",\n      \"iop_os\": \"IOP OS\",\n      \"anterior_segment_findings_od\": \"Anterior Segment Findings OD\",\n      \"anterior_segment_findings_os\": \"Anterior Segment Findings OS\",\n      \"posterior_segment_findings_od\": \"Posterior Segment Findings OD\",\n      \"posterior_segment_findings_os\": \"Posterior Segment Findings OS\",\n      \"refraction_title\": \"Refraction Data\",\n      \"eye\": \"Eye\",\n      \"method\": \"Method\",\n      \"sphere\": \"Sphere\",\n      \"cylinder\": \"Cylinder\",\n      \"axis\": \"Axis\",\n      \"add_power\": \"Add Power\",\n      \"notes\": \"Notes\",\n      \"no_examination_recorded\": \"No examination recorded\",\n      \"diagnoses\": \"Diagnoses\",\n      \"code\": \"Code\",\n      \"term\": \"Term\",\n      \"onset_date\": \"Onset Date\",\n      \"is_primary\": \"Primary\",\n      \"yes\": \"Yes\",\n      \"no\": \"No\",\n      \"no_diagnoses_recorded\": \"No diagnoses recorded\",\n      \"imaging\": \"Imaging Studies\",\n      \"modality\": \"Modality\",\n      \"imaging_status\": \"Status\",\n      \"findings\": \"Findings\",\n      \"no_imaging_recorded\": \"No imaging studies recorded\",\n      \"treatments\": \"Treatment Plans\",\n      \"plan_type\": \"Plan Type\",\n      \"recommendation\": \"Recommendation\",\n      \"details\": \"Details\",\n      \"planned_date\": \"Planned Date\",\n      \"no_treatments_recorded\": \"No treatments recorded\",\n      \"prescriptions\": \"Prescriptions\",\n      \"prescription\": \"Prescription\",\n      \"medication_name\": \"Medication\",\n      \"dosage\": \"Dosage\",\n      \"frequency\": \"Frequency\",\n      \"duration\": \"Duration\",\n      \"instructions\": \"Instructions\",\n      \"no_prescriptions_recorded\": \"No prescriptions recorded\",\n      \"spectacles\": \"Spectacle Prescriptions\",\n      \"add\": \"Add\",\n      \"prism\": \"Prism\",\n      \"pd\": \"PD\",\n      \"no_spectacles_recorded\": \"No spectacle prescriptions recorded\",\n      \"doctor_signature\": \"Doctor's Signature\",\n      \"date\": \"Date\"\n    },\n    \"generated_at\": \"07/11/2025 14:30\",\n    \"current_date\": \"07/11/2025\",\n    \"patient\": {\n      \"full_name\": \"John Michael Doe\",\n      \"dob\": \"15/05/1985\",\n      \"sex\": \"Male\",\n      \"unique_master_citizen_number\": \"1234567890123\",\n      \"phone\": \"+1 (555) 123-4567\",\n      \"email\": \"john.doe@example.com\"\n    },\n    \"visit\": {\n      \"scheduled_at\": \"07/11/2025 10:30\",\n      \"type\": \"Regular Checkup\",\n      \"status\": \"Completed\",\n      \"reason_for_visit\": \"Annual eye examination and vision assessment\"\n    },\n    \"doctor\": {\n      \"name\": \"Dr. Sarah Michelle Johnson\"\n    },\n    \"anamnesis\": {\n      \"chief_complaint\": \"Blurred vision when reading, especially in low light conditions. Patient reports difficulty focusing on near objects for the past 3 months.\",\n      \"history_of_present_illness\": \"Patient has noticed progressive difficulty with near vision over the past 3 months. Symptoms worsen in evening hours. No pain, redness, or discharge. No recent trauma or foreign body sensation.\",\n      \"past_medical_history\": \"Hypertension (controlled with medication), Type 2 Diabetes (diagnosed 2018), Previous cataract surgery OD (2020)\",\n      \"family_history\": \"Mother had glaucoma, Father had macular degeneration\",\n      \"medications_current\": \"Metformin 500mg twice daily, Lisinopril 10mg once daily, Aspirin 81mg daily\",\n      \"allergies\": \"Penicillin (rash), Sulfa drugs (hives)\",\n      \"therapy_in_use\": \"Reading glasses +1.50 (prescribed 2 years ago)\",\n      \"other_notes\": \"Patient is a software developer, spends 8-10 hours daily on computer. Reports increased screen time due to recent project deadlines.\"\n    },\n    \"ophthalmic_exam\": {\n      \"visus_od\": \"20/25\",\n      \"visus_os\": \"20/30\",\n      \"iop_od\": \"15 mmHg\",\n      \"iop_os\": \"16 mmHg\",\n      \"anterior_segment_findings_od\": \"Clear cornea, deep and quiet anterior chamber, round and reactive pupil, clear lens (IOL in place)\",\n      \"anterior_segment_findings_os\": \"Clear cornea, deep and quiet anterior chamber, round and reactive pupil, early nuclear sclerosis noted\",\n      \"posterior_segment_findings_od\": \"Optic disc: Pink, well-defined margins, C/D ratio 0.3. Macula: Flat, good foveal reflex. Vessels: Normal caliber and course. Periphery: No tears or holes.\",\n      \"posterior_segment_findings_os\": \"Optic disc: Pink, well-defined margins, C/D ratio 0.3. Macula: Flat, good foveal reflex. Vessels: Normal caliber and course. Periphery: No tears or holes.\",\n      \"refractions\": [\n        {\n          \"eye\": \"OD (Right)\",\n          \"method\": \"Autorefraction\",\n          \"sphere\": \"+0.75\",\n          \"cylinder\": \"-0.50\",\n          \"axis\": \"90\",\n          \"add_power\": \"+2.00\",\n          \"notes\": \"Patient reports improved clarity at distance\"\n        },\n        {\n          \"eye\": \"OS (Left)\",\n          \"method\": \"Autorefraction\",\n          \"sphere\": \"+1.00\",\n          \"cylinder\": \"-0.75\",\n          \"axis\": \"85\",\n          \"add_power\": \"+2.00\",\n          \"notes\": \"Patient reports improved clarity at distance\"\n        }\n      ]\n    },\n    \"diagnoses\": [\n      {\n        \"code\": \"H52.4\",\n        \"term\": \"Presbyopia\",\n        \"onset_date\": \"15/08/2025\",\n        \"is_primary\": true,\n        \"notes\": \"Age-related loss of accommodation\"\n      },\n      {\n        \"code\": \"H25.11\",\n        \"term\": \"Age-related nuclear cataract, left eye\",\n        \"onset_date\": \"07/11/2025\",\n        \"is_primary\": false,\n        \"notes\": \"Early stage, monitor progression\"\n      },\n      {\n        \"code\": \"H52.223\",\n        \"term\": \"Regular astigmatism, bilateral\",\n        \"onset_date\": \"15/08/2025\",\n        \"is_primary\": false,\n        \"notes\": \"Mild astigmatism, correctable with spectacles\"\n      }\n    ],\n    \"imaging_studies\": [\n      {\n        \"modality\": \"OCT (Optical Coherence Tomography)\",\n        \"eye\": \"Both Eyes\",\n        \"status\": \"Completed\",\n        \"findings\": \"Normal macular thickness bilaterally. No signs of diabetic macular edema. Retinal layers well-defined.\"\n      },\n      {\n        \"modality\": \"Fundus Photography\",\n        \"eye\": \"Both Eyes\",\n        \"status\": \"Completed\",\n        \"findings\": \"Images obtained showing healthy optic nerve heads and macular regions. No diabetic retinopathy changes observed.\"\n      }\n    ],\n    \"treatment_plans\": [\n      {\n        \"plan_type\": \"Optical Correction\",\n        \"recommendation\": \"New spectacle prescription for progressive lenses\",\n        \"details\": \"Patient requires updated prescription for both distance and near vision. Progressive lenses recommended for seamless transition between viewing distances.\",\n        \"start_date\": \"07/11/2025\"\n      },\n      {\n        \"plan_type\": \"Follow-up\",\n        \"recommendation\": \"6-month follow-up for cataract monitoring\",\n        \"details\": \"Monitor progression of nuclear sclerosis OS. Patient education provided regarding cataract symptoms to watch for.\",\n        \"start_date\": \"07/05/2026\"\n      },\n      {\n        \"plan_type\": \"Lifestyle Modification\",\n        \"recommendation\": \"Computer vision syndrome management\",\n        \"details\": \"Advised 20-20-20 rule (every 20 minutes, look at something 20 feet away for 20 seconds). Recommend anti-reflective coating on new glasses and proper workstation ergonomics.\",\n        \"start_date\": \"07/11/2025\"\n      }\n    ],\n    \"prescriptions\": [\n      {\n        \"notes\": \"For dry eye symptoms associated with prolonged computer use\",\n        \"prescription_items\": [\n          {\n            \"medication_name\": \"Artificial Tears (Preservative-free)\",\n            \"dosage\": \"1-2 drops\",\n            \"frequency\": \"4 times daily\",\n            \"duration\": \"Ongoing\",\n            \"instructions\": \"Use before computer work and as needed for dryness\"\n          },\n          {\n            \"medication_name\": \"Omega-3 Supplements\",\n            \"dosage\": \"1000mg\",\n            \"frequency\": \"Once daily with food\",\n            \"duration\": \"3 months\",\n            \"instructions\": \"To support tear film quality\"\n          }\n        ]\n      }\n    ],\n    \"spectacle_prescriptions\": [\n      {\n        \"eye\": \"OD (Right)\",\n        \"sphere\": \"+0.75\",\n        \"cylinder\": \"-0.50\",\n        \"axis\": \"90\",\n        \"add_power\": \"+2.00\",\n        \"prism\": \"\\u2014\",\n        \"pupillary_distance\": \"32mm\"\n      },\n      {\n        \"eye\": \"OS (Left)\",\n        \"sphere\": \"+1.00\",\n        \"cylinder\": \"-0.75\",\n        \"axis\": \"85\",\n        \"add_power\": \"+2.00\",\n        \"prism\": \"\\u2014\",\n        \"pupillary_distance\": \"32mm\"\n      }\n    ]\n  },\n  \"options\": {\n    \"format\": \"A4\",\n    \"landscape\": true\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/pdf/generate",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "pdf",
            "generate"
          ]
        },
        "description": "Generate PDF in landscape orientation"
      },
      "response": []
    },
    {
      "name": "Generate from HTML",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response contains PDF\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.success).to.be.true;",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"html\": \"<!DOCTYPE html><html><head><title>Test PDF</title><style>body { font-family: Arial, sans-serif; padding: 20px; } h1 { color: #4f46e5; }</style></head><body><h1>Test PDF Document</h1><p>This is a test PDF generated from raw HTML.</p><ul><li>Item 1</li><li>Item 2</li><li>Item 3</li></ul></body></html>\",\n  \"options\": {\n    \"format\": \"A4\",\n    \"landscape\": false,\n    \"margin\": {\n      \"top\": \"20mm\",\n      \"right\": \"20mm\",\n      \"bottom\": \"20mm\",\n      \"left\": \"20mm\"\n    }\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/pdf/from-html",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "pdf",
            "from-html"
          ]
        },
        "description": "Generate PDF from raw HTML string"
      },
      "response": []
    },
    {
      "name": "Generate from URL",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"url\": \"https://example.com\",\n  \"options\": {\n    \"format\": \"A4\",\n    \"landscape\": false\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/pdf/from-url",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "pdf",
            "from-url"
          ]
        },
        "description": "Generate PDF from a URL"
      },
      "response": []
    },
    {
      "name": "Error - Missing template_specifications",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 400\", function () {",
              "    pm.response.to.have.status(400);",
              "});",
              "",
              "pm.test(\"Error message mentions template_specifications\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.error).to.include('template_specifications');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"data\": {\n    \"patient\": {\n      \"full_name\": \"Test\"\n    }\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/pdf/generate",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "pdf",
            "generate"
          ]
        },
        "description": "Test error handling when template_specifications is missing"
      },
      "response": []
    },
    {
      "name": "Error - Missing template ID",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 400\", function () {",
              "    pm.response.to.have.status(400);",
              "});",
              "",
              "pm.test(\"Error mentions ID is required\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.error).to.include('id');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"template_specifications\": {\n    \"folder\": \"reports\"\n  },\n  \"data\": {\n    \"patient\": {\n      \"full_name\": \"Test\"\n    }\n  }\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/api/pdf/generate",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "pdf",
            "generate"
          ]
        },
        "description": "Test error handling when template ID is missing"
      },
      "response": []
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    }
  ]
}